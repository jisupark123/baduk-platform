(()=>{function t(t,r){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,r){if(t){if("string"==typeof t)return e(t,r);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?e(t,r):void 0}}(t))||r&&t&&"number"==typeof t.length){n&&(t=n);var o=0,a=function(){};return{s:a,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return l=t.done,t},e:function(t){u=!0,i=t},f:function(){try{l||null==n.return||n.return()}finally{if(u)throw i}}}}function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var r,n,o,a,i,l,u,f,c,s,v,d,h,y,p,S;r=document.querySelector(".input-line"),n=r.querySelector("input"),o=r.querySelector(".input-line-btn"),a=document.querySelector(".question-upload"),i=a.querySelector(".question-upload__title"),l=a.querySelector(".question-upload__turn-black"),u=a.querySelector(".question-upload__turn-white"),f=a.querySelector(".question-upload__black-btn"),c=a.querySelector(".question-upload__white-btn"),s=a.querySelector(".question-canvas"),v=a.querySelector(".question-upload__finish-btn"),d="clicked",h="hidden",y=[],p=1,S=1,o.addEventListener("click",(function(){var e=Number(n.value);r.classList.add(h),a.classList.remove(h),function(e,r){var n=e.getContext("2d"),o=30,a="black";e.width=360,e.height=360;var i=r||13,l=i-1,u=300/l,f=0,c={},s=new Array(Math.pow(l+1,2)).fill(-1),v=[[1,0],[0,-1],[0,1],[-1,0]];function d(){n.fillStyle="#e38d00",n.fillRect(0,0,360,360);for(var t=0;t<l;t++)for(var e=0;e<l;e++){var r=300/l;n.strokeStyle=a,n.lineWidth=1,n.strokeRect(r*t+o,r*e+o,r,r)}function i(t,e){n.fillStyle=a,n.lineWidth=1,n.beginPath(),n.arc(t,e,10/3,0,2*Math.PI),n.fill()}n.fillStyle=a,n.lineWidth=1;for(var f=0;f<2;f++)for(var c=0;c<2;c++)i((3+f)*u+o+f*(l-7)*u,(3+c)*u+o+c*(l-7)*u);i(180,180)}function h(t,e,r){n.fillStyle=r,n.beginPath(),n.arc(t*u+o,e*u+o-.2,10,0,2*Math.PI),n.fill()}var S=function(){for(var t=0;t<s.length;t++){var e=b(t)[0],r=b(t)[1];1===s[m(e,r)]?h(e,r,"black"):2===s[m(e,r)]&&h(e,r,"white")}},m=function(t,e){return t>=i||t<0||e>=i||e<0?void 0:t+e*i},b=function(t){return[t%i,Math.floor(t/i)]},g=function(t,e){return t>10&&t<340&&e>10&&e<340},q=function(t,e){return[Math.floor(Math.abs(t-o)/u),Math.floor(Math.abs(e-o)/u)]};d(),S(),e.addEventListener("mouseup",(function(e){var r=q(e.offsetX,e.offsetY)[0],n=q(e.offsetX,e.offsetY)[1];if(g(e.offsetX,e.offsetY)){if(-1!=s[m(r,n)])return;if(s[m(r,n)]=1===p?1:2,!function(e,r){function n(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=0,a=[],l=[];function u(t,e,r){if(o)return!1;for(var f=0;f<4;f++){if(o)return!1;var c=t+v[f][0],d=e+v[f][1];if(!(c<0||c>=i||d<0||d>=i)){var h=String(c)+"/"+String(d);if(!a.includes(h)){if(-1===s[m(c,d)])return o+=1,!1;s[m(c,d)]===r&&(a.push(h),u(c,d,r))}}}return!o&&(n&&l.push(m(t,e)),!n||Array.from(new Set(l)))}return u(t,e,r)}for(var o=f%2==0?1:2,a=1===o?2:1,l=[],u=[],d=0;d<4;d++){var h=e+v[d][0],y=r+v[d][1];s[m(h,y)]===a&&l.push([h,y])}if(!l.length)return!n(e,r,o);var p,S=t(l);try{for(S.s();!(p=S.n()).done;){var b=p.value,g=n(b[0],b[1],a,!0);if(g){var q,L=t(g);try{for(L.s();!(q=L.n()).done;){var k=q.value;u.push(k)}}catch(t){L.e(t)}finally{L.f()}}}}catch(t){S.e(t)}finally{S.f()}if(!u.length)return!n(e,r,o);if(!function(t,e,r,n){for(var o=[],a=0;a<4;a++){var i=t+v[a][0],l=e+v[a][1];o.push(s[m(i,l)])}if(1===n.length&&-1===o.indexOf(r)&&-1===o.indexOf(-1)){var u=m(t,e)>n[0]?"".concat(m(t,e),"/").concat(n[0]):"".concat(n[0],"/").concat(m(t,e)),d=f+1;return c[u]!==d-1&&(c[u]=d,!0)}return!0}(e,r,o,u))return!1;for(var w=0,_=u;w<_.length;w++){var E=_[w];s[E]=-1}return!0}(r,n))return void(s[m(r,n)]=-1);y=s,f++,d(),S()}})),e.addEventListener("mousemove",(function(t){if(g(t.offsetX,t.offsetY)){var e=q(t.offsetX,t.offsetY)[0],r=q(t.offsetX,t.offsetY)[1];-1!==s[m(e,r)]?(d(),S()):1===p?(d(),S(),h(e,r,"rgba(0,0,0,0.5)")):(d(),S(),h(e,r,"rgba(255,255,255,0.5)"))}})),e.addEventListener("mouseleave",(function(){d(),S()}))}(s,e)})),l.addEventListener("click",(function(t){t.preventDefault(),1!==S&&(S=1,l.classList.add(d),u.classList.remove(d))})),u.addEventListener("click",(function(t){t.preventDefault(),2!==S&&(S=2,u.classList.add(d),l.classList.remove(d))})),f.addEventListener("click",(function(t){t.preventDefault(),2===p&&(p=1,f.classList.add(d),c.classList.remove(d))})),c.addEventListener("click",(function(t){t.preventDefault(),1===p&&(p=2,c.classList.add(d),f.classList.remove(d))})),v.addEventListener("click",(function(t){t.preventDefault();var e=i.value;e?(localStorage.setItem("turn",S),localStorage.setItem("board",JSON.stringify(y)),localStorage.setItem("title",e),location.replace("answer-upload")):alert("제목을 입력해주세요")}))})();