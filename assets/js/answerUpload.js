(()=>{function t(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var o=0,a=function(){};return{s:a,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var f,i=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return i=t.done,t},e:function(t){u=!0,f=t},f:function(){try{i||null==n.return||n.return()}finally{if(u)throw f}}}}function r(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}var e=document.querySelector(".answer-upload"),n=e.querySelector(".answer-canvas"),o=e.querySelector(".answer-upload__finish-btn"),a=n.getContext("2d"),f=[],i=30,u="black";n.width=360,n.height=360;var l=13,c=25,s="1"===localStorage.getItem("turn")?0:1,v={},h=JSON.parse(localStorage.getItem("board")),d=[[1,0],[0,-1],[0,1],[-1,0]];function y(){a.fillStyle="#e38d00",a.fillRect(0,0,360,360);for(var t=0;t<12;t++)for(var r=0;r<12;r++)a.strokeStyle=u,a.lineWidth=1,a.strokeRect(25*t+i,25*r+i,25,25);function e(t,r){a.fillStyle=u,a.lineWidth=1,a.beginPath(),a.arc(t,r,10/3,0,2*Math.PI),a.fill()}a.fillStyle=u,a.lineWidth=1;for(var n=0;n<2;n++)for(var o=0;o<2;o++)e((3+n)*c+i+5*n*c,(3+o)*c+i+5*o*c);e(180,180)}function g(t,r,e){a.fillStyle=e,a.beginPath(),a.arc(t*c+i,r*c+i-.2,10,0,2*Math.PI),a.fill()}var p=function(t,r){for(var e=0;e<h.length;e++){var n=b(e)[0],o=b(e)[1];1===h[S(n,o)]?g(n,o,"black"):2===h[S(n,o)]&&g(n,o,"white")}},S=function(t,r){return t>=l||t<0||r>=l||r<0?void 0:t+r*l},b=function(t){return[t%l,Math.floor(t/l)]},m=function(t,r){return t>10&&t<340&&r>10&&r<340},w=function(t,r){return[Math.floor(Math.abs(t-i)/c),Math.floor(Math.abs(r-i)/c)]};y(),n.addEventListener("mouseup",(function(r){var e=w(r.offsetX,r.offsetY)[0],n=w(r.offsetX,r.offsetY)[1];if(m(r.offsetX,r.offsetY)){if(-1!=h[S(e,n)])return;if(h[S(e,n)]=s%2==0?1:2,!function(r,e){function n(t,r,e){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=0,a=[],f=[];function i(t,r,e){if(o)return!1;for(var u=0;u<4;u++){if(o)return!1;var c=t+d[u][0],s=r+d[u][1];if(!(c<0||c>=l||s<0||s>=l)){var v=String(c)+"/"+String(s);if(!a.includes(v)){if(-1===h[S(c,s)])return o+=1,!1;h[S(c,s)]===e&&(a.push(v),i(c,s,e))}}}return!o&&(n&&f.push(S(t,r)),!n||Array.from(new Set(f)))}return i(t,r,e)}for(var o=s%2==0?1:2,a=1===o?2:1,f=[],i=[],u=0;u<4;u++){var c=r+d[u][0],y=e+d[u][1];h[S(c,y)]===a&&f.push([c,y])}if(!f.length)return!n(r,e,o);var g,p=t(f);try{for(p.s();!(g=p.n()).done;){var b=g.value,m=n(b[0],b[1],a,!0);if(m){var w,I=t(m);try{for(I.s();!(w=I.n()).done;){var M=w.value;i.push(M)}}catch(t){I.e(t)}finally{I.f()}}}}catch(t){p.e(t)}finally{p.f()}if(!i.length)return!n(r,e,o);if(!function(t,r,e,n){for(var o=[],a=0;a<4;a++){var f=t+d[a][0],i=r+d[a][1];o.push(h[S(f,i)])}if(1===n.length&&-1===o.indexOf(e)&&-1===o.indexOf(-1)){var u=S(t,r)>n[0]?"".concat(S(t,r),"/").concat(n[0]):"".concat(n[0],"/").concat(S(t,r)),l=s+1;return v[u]!==l-1&&(v[u]=l,!0)}return!0}(r,e,o,i))return!1;for(var A=0,O=i;A<O.length;A++){var X=O[A];h[X]=-1}return!0}(e,n))return void(h[S(e,n)]=-1);f.push(S(e,n)),s++,y(),p()}})),n.addEventListener("mousemove",(function(t){if(m(t.offsetX,t.offsetY)){var r=w(t.offsetX,t.offsetY)[0],e=w(t.offsetX,t.offsetY)[1];-1!==h[S(r,e)]?(y(),p()):s%2==0?(y(),p(),g(r,e,"rgba(0,0,0,0.5)")):(y(),p(),g(r,e,"rgba(255,255,255,0.5)"))}})),n.addEventListener("mouseleave",(function(){y(),p()})),o.addEventListener("click",(function(t){t.preventDefault(),localStorage.setItem("answer",JSON.stringify(f)),location.replace("failure-upload")}))})();