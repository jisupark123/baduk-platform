(()=>{function e(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=n(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var o=0,i=function(){};return{s:i,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,f=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return f=e.done,e},e:function(e){u=!0,a=e},f:function(){try{f||null==r.return||r.return()}finally{if(u)throw a}}}}function t(e){return function(e){if(Array.isArray(e))return r(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||n(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}!function(){var n=document.querySelector("#gibo-start-btn"),r=document.querySelector("canvas"),o=document.querySelector(".gibo"),i=document.querySelector(".tools"),a=i.querySelector("#showNumBtn"),f=i.querySelector("#goBegin"),u=i.querySelector("#goEnd"),c=i.querySelector("#goBefore5"),l=i.querySelector("#goBefore1"),s=i.querySelector("#goNext1"),d=i.querySelector("#goNext5"),v=!1,h=r.getContext("2d"),y=30,b="black";r.width=760,r.height=760;var g=19,m=700/18,S=0,p={},q=[],w=new Array(Math.pow(19,2)).fill(-1),E=[{board:t(w),sequence:[]}],k=[[1,0],[0,-1],[0,1],[-1,0]];function L(){h.fillStyle="#e38d00",h.fillRect(0,0,760,760);for(var e=0;e<18;e++)for(var t=0;t<18;t++){var n=700/18;h.strokeStyle=b,h.lineWidth=1,h.strokeRect(n*e+y,n*t+y,n,n)}function r(e,t){h.fillStyle=b,h.lineWidth=1,h.beginPath(),h.arc(e,t,17/3,0,2*Math.PI),h.fill()}h.fillStyle=b,h.lineWidth=1;for(var o=0;o<2;o++)for(var i=0;i<2;i++)r((3+o)*m+y+11*o*m,(3+i)*m+y+11*i*m);r(3*m+y,380),r(380,3*m+y),r(380,613.3333333333333),r(613.3333333333333,380),r(380,380)}var A=function(e,t,n){var r=q.lastIndexOf(M(e,t))+1,o=r>=100?-4:r>=10?-3.5:1,i=r>=100?-3:0;h.fillStyle=n,h.beginPath(),h.font="".concat(r<100?23:16,"px notoSans"),h.fillText(r,e*m+y-8.5+o,t*m+y+8.5+i)};function x(e,t,n){h.fillStyle=n,h.beginPath(),h.arc(e*m+y,t*m+y-.2,17,0,2*Math.PI),h.fill()}var M=function(e,t){return e>=g||e<0||t>=g||t<0?void 0:e+t*g},I=function(e){return[e%g,Math.floor(e/g)]},X=function(e,t){return e>10&&e<740&&t>10&&t<740},Y=function(e,t){return[Math.round(Math.abs(e-y)/m),Math.round(Math.abs(t-y)/m)]};function O(){L(),function(e,t){for(var n=0;n<w.length;n++){var r=I(n)[0],o=I(n)[1];1===w[M(r,o)]?(x(r,o,"black"),v&&A(r,o,"white")):2===w[M(r,o)]&&(x(r,o,"white"),v&&A(r,o,"black"))}}()}function P(e){var n="begin"===e?0:"end"===e?E.length-1:S+e;E[n]&&(w=t(E[n].board),q=t(E[n].sequence),S=n,O())}r.addEventListener("mouseup",(function(n){var r=Y(n.offsetX,n.offsetY)[0],o=Y(n.offsetX,n.offsetY)[1];if(X(n.offsetX,n.offsetY)){if(-1!=w[M(r,o)])return;if(w[M(r,o)]=S%2==0?1:2,!function(t,n){function r(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=0,i=[],a=[];function f(e,t,n){if(o)return!1;for(var u=0;u<4;u++){if(o)return!1;var c=e+k[u][0],l=t+k[u][1];if(!(c<0||c>=g||l<0||l>=g)){var s=String(c)+"/"+String(l);if(!i.includes(s)){if(-1===w[M(c,l)])return o+=1,!1;w[M(c,l)]===n&&(i.push(s),f(c,l,n))}}}return!o&&(r&&a.push(M(e,t)),!r||Array.from(new Set(a)))}return f(e,t,n)}for(var o=S%2==0?1:2,i=1===o?2:1,a=[],f=[],u=0;u<4;u++){var c=t+k[u][0],l=n+k[u][1];w[M(c,l)]===i&&a.push([c,l])}if(!a.length)return!r(t,n,o);var s,d=e(a);try{for(d.s();!(s=d.n()).done;){var v=s.value,h=r(v[0],v[1],i,!0);if(h){var y,b=e(h);try{for(b.s();!(y=b.n()).done;){var m=y.value;f.push(m)}}catch(e){b.e(e)}finally{b.f()}}}}catch(e){d.e(e)}finally{d.f()}if(!f.length)return!r(t,n,o);if(!function(e,t,n,r){for(var o=[],i=0;i<4;i++){var a=e+k[i][0],f=t+k[i][1];o.push(w[M(a,f)])}if(1===r.length&&-1===o.indexOf(n)&&-1===o.indexOf(-1)){var u=M(e,t)>r[0]?"".concat(M(e,t),"/").concat(r[0]):"".concat(r[0],"/").concat(M(e,t)),c=S+1;return p[u]!==c-1&&(p[u]=c,!0)}return!0}(t,n,o,f))return!1;for(var q=0,E=f;q<E.length;q++){var L=E[q];w[L]=-1}return!0}(r,o))return void(w[M(r,o)]=-1);S++,q.push(M(r,o)),(E=E.slice(0,S)).push({board:t(w),sequence:t(q)}),console.log(E),O()}})),r.addEventListener("mousemove",(function(e){if(X(e.offsetX,e.offsetY)){var t=Y(e.offsetX,e.offsetY)[0],n=Y(e.offsetX,e.offsetY)[1];-1!==w[M(t,n)]?O():S%2==0?(O(),x(t,n,"rgba(0,0,0,0.3)")):(O(),x(t,n,"rgba(255,255,255,0.5)"))}})),r.addEventListener("mouseleave",(function(){O()})),L(),n.addEventListener("click",(function(e){e.preventDefault(),o.classList.remove("hidden"),scrollTo({top:innerHeight,behavior:"smooth"})})),a.addEventListener("click",(function(e){e.preventDefault(),v=!v,a.innerText=!0===v?"순서 제거":"순서 표시",O()})),f.addEventListener("click",(function(){return P("begin")})),u.addEventListener("click",(function(){return P("end")})),c.addEventListener("click",(function(){return P(-5)})),l.addEventListener("click",(function(){return P(-1)})),s.addEventListener("click",(function(){return P(1)})),d.addEventListener("click",(function(){return P(5)}))}()})();