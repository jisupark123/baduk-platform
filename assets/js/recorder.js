(()=>{function e(e,n,t,r,c,o,i){try{var a=e[o](i),d=a.value}catch(e){return void t(e)}a.done?n(d):Promise.resolve(d).then(r,c)}var n,t,r=document.querySelector(".record-btn"),c=document.getElementById("preview"),o=function(){var e=document.createElement("a");e.href=t,e.download="MyRecording.webm",document.body.appendChild(e),e.click()},i=function e(){r.innerText="Download Recording",r.removeEventListener("click",e),r.addEventListener("click",o),n.stop()};r.addEventListener("click",(function e(){r.innerText="Stop Recording",r.removeEventListener("click",e),r.addEventListener("click",i),n=new MediaRecorder(undefined),console.log(n),n.ondataavailable=function(e){t=URL.createObjectURL(e.data),c.srcObject=null,c.src=t,c.loop=!0,c.play()},n.start()}));var a,d,u,l=document.querySelector(".audio-record-btn"),s=document.getElementById("audio-preview"),v=function(){var e=document.createElement("a");e.href=u,e.download="MyRecording.mp3",document.body.appendChild(e),e.click()},m=function e(){l.innerText="Download Recording",l.removeEventListener("click",e),l.addEventListener("click",v),d.stop()},f=function(){var n,t=(n=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l.innerText="Stop Recording",l.removeEventListener("click",f),l.addEventListener("click",m),e.next=5,navigator.mediaDevices.getUserMedia({audio:!0,video:!1});case 5:a=e.sent,s.srcObject=a,(d=new MediaRecorder(a)).ondataavailable=function(e){u=URL.createObjectURL(e.data),s.srcObject=null,s.src=u},d.start(),setTimeout((function(){"recording"===d.state&&l.click()}),5e3);case 11:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(c,o){var i=n.apply(t,r);function a(n){e(i,c,o,a,d,"next",n)}function d(n){e(i,c,o,a,d,"throw",n)}a(void 0)}))});return function(){return t.apply(this,arguments)}}();l.addEventListener("click",f)})();